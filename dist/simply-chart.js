!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports["simply-chart"]=i():t["simply-chart"]=i()}("undefined"!=typeof self?self:this,function(){return function(t){var i={};function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/",e(e.s=4)}([function(t,i,e){"use strict";var n;e.d(i,"a",function(){return n}),function(t){t.none="none",t.point="point",t.total="total"}(n||(n={}))},function(t,i,e){"use strict";var n=e(0),s=e(6);const r={dom:"",width:200,height:100,padding:10,renderType:n.a.none,renderTime:2,renderCurve:"ease-in-out",framePerSecond:60};let h=0;i.a=class{constructor(t,i){this.animation=!1,this.config=Object.assign({},r,i,t.base,t.attr),this.config.innerWidth=this.config.width-2*this.config.padding,this.config.innerHeight=this.config.height-2*this.config.padding,this.canvasInit(),this.animation=this.config.renderType!==n.a.none,this.insert(),this.getName(),Object(s.b)(),Object(s.a)(this)}insert(){this.dom.appendChild(this.canvas)}reset(){this.canvas.height=this.canvas.height}axiesChange(){this.ctx.scale(1,-1),this.ctx.translate(this.config.padding,-this.config.height*this.pixelRatio+this.config.padding)}canvasInit(){"string"==typeof this.config.dom?this.dom=document.querySelector(this.config.dom):this.dom=this.config.dom,this.canvas=this.config.canvas||document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.pixelRatio=window.devicePixelRatio,this.canvas.width=this.config.width*this.pixelRatio,this.canvas.height=this.config.height*this.pixelRatio,this.canvas.style.width=`${this.config.width}px`,this.canvas.style.height=`${this.config.height}px`}getName(){this.id=h,h+=1,this.name=`${this.constructor.name}_${this.id}`}}},function(t,i,e){"use strict";var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();var s=e(8),r=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.p0={x:0,y:0},this.p3={x:1,y:1},this.p1=i,this.p2=e,this.bezierStr=i.x+", "+i.y+", "+e.x+", "+e.y,this.easing=s(i.x,i.y,e.x,e.y)}return n(t,[{key:"getPoint",value:function(t){return{x:this.p0.x*Math.pow(1-t,3)+this.p1.x*t*Math.pow(1-t,2)*3+this.p2.x*Math.pow(t,2)*(1-t)*3+this.p3.x*Math.pow(t,3),y:this.p0.y*Math.pow(1-t,3)+this.p1.y*t*Math.pow(1-t,2)*3+this.p2.y*Math.pow(t,2)*(1-t)*3+this.p3.y*Math.pow(t,3)}}},{key:"getYByTime",value:function(t){return this.easing(t)}}]),t}(),h=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();var o=function(){function t(i,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"liner";!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.begin=i,this.end=e,this.time=n,this.animationType=s,this.getBazier()}return h(t,[{key:"getValue",value:function(t){return this.begin+(this.end-this.begin)*this.bezier.getYByTime(t)}},{key:"getList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,i=[],e=0;e<=t*this.time;e+=1)i.push(this.getValue(e/(this.time*t)));return i}},{key:"getBazier",value:function(){var t=void 0,i=void 0;switch(this.animationType){case"liner":t={x:0,y:0},i={x:1,y:1};break;case"ease":t={x:.25,y:.1},i={x:.25,y:1};break;case"ease-in":t={x:.42,y:0},i={x:1,y:1};break;case"ease-out":t={x:0,y:0},i={x:.58,y:1};break;case"ease-in-out":t={x:.42,y:0},i={x:.58,y:1};break;case"in-back-out":t={x:.68,y:-.55},i={x:.27,y:1.55};break;default:var e=this.animationType.split(",");if(!e||4!==e.length)throw new Error("The animation type is not right");t={x:parseFloat(e[0]),y:parseFloat(e[1])},i={x:parseFloat(e[2]),y:parseFloat(e[3])}}this.bezier=new r(t,i)}}]),t}();i.a=o},function(t,i,e){"use strict";class n{constructor(t){this.vector=t,this.value=this.getValue(this)}add(t){return new n({x:this.vector.x+t.vector.x,y:this.vector.y+t.vector.y})}minus(t){return new n({x:this.vector.x-t.vector.x,y:this.vector.y-t.vector.y})}dot(t){return this.vector.x*t.vector.x+this.vector.y*t.vector.y}cross(t){return this.vector.x*t.vector.y-this.vector.y*t.vector.x}mod(t=!0){return t?Math.sqrt(Math.pow(this.vector.x,2)+Math.pow(this.vector.y,2)):Math.pow(this.vector.x,2)+Math.pow(this.vector.y,2)}vertical(){return new n({x:this.vector.y,y:-this.vector.x}).normaliz()}ankle(t){const i=180*Math.acos(this.dot(t)/(this.mod()*t.mod()))/Math.PI;return i>180?i-180:i}normaliz(){const t=Math.sqrt(1/(Math.pow(this.vector.y,2)/Math.pow(this.vector.x,2)+1));return new n({x:t,y:0===t?1:this.vector.y/this.vector.x*t})}getValue(t){return Math.sqrt(Math.pow(t.vector.x,2)+Math.pow(t.vector.y,2))}}i.a=n},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e(5),s=e(11),r=e(12);i.default={line:n.a,bar:s.a,pie:r.a}},function(t,i,e){"use strict";var n,s=e(1),r=e(7),h=e(0),o=e(2),a=e(9),c=e(10);!function(t){t.catumulRom="catumulRom",t.bezierSmooth="bezierSmooth"}(n||(n={}));i.a=class extends s.a{constructor(t){super(t,{color:"blue",lineWidth:5,point:!1,pointRadius:3,pointFill:!1,smooth:!1,shadowColor:""}),this.pointList=[],this.renderAttr={lengthList:[],frameList:[]},this.smoothType=n.catumulRom}point(){return this.config.point=!0,this}fill(){return this.config.pointFill=!0,this}update(t){this.data=t,1===this.data.length&&(this.point(),this.fill());const i=1!==this.data.length?this.config.innerWidth/(this.data.length-1):this.config.innerWidth/2,e=Math.max(...this.data),n=Math.min(...this.data),s=e!==n?this.config.innerHeight/(e-n):1,a=[],c=[];let f=[],l=0;for(let t=0;t<this.data.length;t+=1){const e={x:t*i*this.pixelRatio,y:(this.data[t]-n)*s*this.pixelRatio};a.push(e)}if(this.animation){for(let t=1;t<a.length;t+=1)c.push(Object(r.a)(a[t-1],a[t])),this.config.renderType===h.a.point&&(f=f.concat(new o.a(l,c[t-1]+l,this.config.renderTime/a.length,this.config.renderCurve).getList(this.config.framePerSecond)),l+=c[t-1]);this.config.renderType===h.a.total&&(f=new o.a(0,Object(r.b)(c),this.config.renderTime,this.config.renderCurve).getList(this.config.framePerSecond)),this.renderAttr.lengthList=c,this.renderAttr.frameList=f}return this.pointList=a,this}render(){return this.config.renderType===h.a.none?this.renderNoAnimation():this.config.renderType===h.a.point?this.frameRender(this.renderAttr):this.config.renderType===h.a.total&&this.frameRender(this.renderAttr),this}renderStrike(t){if(this.ctx.lineCap="round",this.ctx.lineWidth=this.config.lineWidth,this.config.shadowColor){const i=1-this.config.lineWidth;this.ctx.beginPath(),this.ctx.strokeStyle=this.config.shadowColor,this.ctx.moveTo(t[0].x,t[0].y),this.ctx.lineTo(0,i),this.ctx.lineTo(t[t.length-1].x,i),this.ctx.lineTo(t[t.length-1].x,t[t.length-1].y),this.ctx.stroke(),this.ctx.closePath()}this.ctx.beginPath(),this.ctx.strokeStyle=this.config.color,this.ctx.moveTo(t[0].x,t[0].y);for(let i=1;i<t.length;i+=1){const e=t[i];this.ctx.lineTo(e.x,e.y)}this.ctx.stroke(),this.ctx.closePath()}renderFill(t){if(this.config.shadowColor){this.ctx.beginPath(),this.ctx.fillStyle=this.config.shadowColor,this.ctx.moveTo(0,0);for(const i of t)this.ctx.lineTo(i.x,i.y);this.ctx.lineTo(t[t.length-1].x,0),this.ctx.fill(),this.ctx.closePath()}}renderNoAnimation(){let t;this.reset(),this.axiesChange(),this.ctx.save(),this.ctx.beginPath(),t=this.config.smooth?Object(c.a)(this.pointList,100):this.pointList,this.renderFill(t),this.renderStrike(t),this.ctx.closePath(),this.ctx.restore();for(const t of this.pointList)this.renderPoint(t)}frameRender(t){requestAnimationFrame(()=>{if(!t.frameList.length)return;const i=t.frameList.shift(),e=this.getPointByFrame(i,t.lengthList);let s;if(this.reset(),this.axiesChange(),this.ctx.save(),this.ctx.beginPath(),this.config.smooth){if(this.smoothType===n.catumulRom)s=Object(c.a)(e,100);else if(this.smoothType===n.bezierSmooth){const t=Object(a.a)(e);this.ctx.moveTo(e[0].x,e[0].y);for(const i of t)this.ctx.bezierCurveTo(i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y)}}else s=e;this.renderFill(s),this.renderStrike(s),this.ctx.closePath(),this.ctx.restore();for(const t of e)this.renderPoint(t);t.frameList.length&&this.frameRender(t)})}renderPoint(t){if(!this.config.point)return;const i=this.config.pointRadius*this.pixelRatio;this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.x,t.y,i,0,2*Math.PI),this.config.pointFill?(this.ctx.fillStyle=this.config.color,this.ctx.fill()):(this.ctx.lineWidth=this.config.lineWidth,this.ctx.strokeStyle=this.config.color,this.ctx.stroke(),this.ctx.fillStyle="#fff",this.ctx.fill()),this.ctx.closePath(),this.ctx.restore()}getPointByFrame(t,i){let e,n=0;for(let s=0;s<i.length;s+=1){if(t<=i[s]+n){e=s;break}n+=i[s]}const s=(t-n)/i[e];return this.pointList.slice(0,e+1).concat({x:this.pointList[e].x+(this.pointList[e+1].x-this.pointList[e].x)*s,y:this.pointList[e].y+(this.pointList[e+1].y-this.pointList[e].y)*s})}}},function(t,i,e){"use strict";const n=window?window.__DATA_DEBUGGER_DEVTOOLS_GLOBAL_HOOK__:"";let s=!1;const r=[];i.b=(()=>{n&&!s&&(n.emit("install"),s=!0)});const h=()=>{window.__Canvas_Screen_Data||(window.__Canvas_Screen_Data=r)};i.a=(t=>{const i=t;let e=r.find(t=>t.id===i.id);e?e=t:r.push(i),n&&(h(),n.emit("refresh"))})},function(t,i,e){"use strict";i.a=function(t,i){return new n.a({x:i.x-t.x,y:i.y-t.y}).value},i.b=function(t){let i=0;return t.map(t=>i+=t),i};var n=e(3)},function(t,i){var e=4,n=.001,s=1e-7,r=10,h=11,o=1/(h-1),a="function"==typeof Float32Array;function c(t,i){return 1-3*i+3*t}function f(t,i){return 3*i-6*t}function l(t){return 3*t}function d(t,i,e){return((c(i,e)*t+f(i,e))*t+l(i))*t}function u(t,i,e){return 3*c(i,e)*t*t+2*f(i,e)*t+l(i)}function g(t){return t}t.exports=function(t,i,c,f){if(!(0<=t&&t<=1&&0<=c&&c<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===i&&c===f)return g;for(var l=a?new Float32Array(h):new Array(h),x=0;x<h;++x)l[x]=d(x*o,t,c);function p(i){for(var a=0,f=1,g=h-1;f!==g&&l[f]<=i;++f)a+=o;var x=a+(i-l[--f])/(l[f+1]-l[f])*o,p=u(x,t,c);return p>=n?function(t,i,n,s){for(var r=0;r<e;++r){var h=u(i,n,s);if(0===h)return i;i-=(d(i,n,s)-t)/h}return i}(i,x,t,c):0===p?x:function(t,i,e,n,h){var o,a,c=0;do{(o=d(a=i+(e-i)/2,n,h)-t)>0?e=a:i=a}while(Math.abs(o)>s&&++c<r);return a}(i,a,a+o,t,c)}return function(t){return 0===t?0:1===t?1:d(p(t),i,f)}}},function(t,i,e){"use strict";function n(t,i,e,n){return[i,{x:i.x+.25*(e.x-t.x),y:i.y+.25*(e.y-t.y)},{x:e.x-.25*(n.x-i.x),y:e.y-.25*(n.y-i.y)},e]}i.a=(t=>(function(t){const i=t.length,e=[];for(let s=0;s<i-1;s+=1){const r=n(t[Math.max(0,s-1)],t[s],t[Math.min(s+1,i-1)],t[Math.min(s+2,i-1)]);e.push(r)}return e})(t))},function(t,i,e){"use strict";var n=e(3);function s(t,i,e,s,r){const h=r*r*r,o=r*r,a=-.5*h+o-.5*r,c=1.5*h-2.5*o+1,f=-1.5*h+2*o+.5*r,l=.5*h-.5*o,d=t.x*a+i.x*c+e.x*f+s.x*l,u=t.y*a+i.y*c+e.y*f+s.y*l;return new n.a({x:d,y:u})}i.a=((t,i)=>(function(t,i){if(!t)return;const e=t.length,n=[];for(let h=0;h<e-1;h+=1)for(let o=0;o<1;o+=1/i){const i=s(t[Math.max(0,h-1)],t[h],t[Math.min(h+1,e-1)],t[Math.min(h+2,e-1)],o);n.push(i),r+=1}return n})(t,i).map(t=>t.vector));let r=0},function(t,i,e){"use strict";var n=e(1),s=e(0),r=e(2);i.a=class extends n.a{constructor(t){super(t,{barRadius:5,colors:["red","orange","yellow","green","cyan","blue","purple"]}),this.data=[],this.heightList=[],this.renderAttr={frameList:[]}}update(t){this.data=t;const i=(this.config.innerWidth-t.length-1)/t.length,e=this.config.innerWidth/(2*t.length+1);this.config.barWidth?this.config.barWidth>i&&(this.config.barWidth=i):this.config.barWidth=e;const n=Math.max(...this.data),h=0!==n?this.config.innerHeight/(n-0):1;for(let t=0;t<this.data.length;t+=1)1===h&&0===n?this.heightList.push(1):this.heightList.push((this.data[t]-0)*h),this.config.renderType===s.a.total&&this.renderAttr.frameList.push(new r.a(0,this.heightList[t],this.config.renderTime,this.config.renderCurve).getList(this.config.framePerSecond));return this}render(){return this.config.renderType===s.a.none?this.renderWidthNoFrame():this.config.renderType===s.a.total&&this.renderWidthFrame(),this}renderWidthNoFrame(){this.reset(),this.ctx.save(),this.axiesChange();for(let t=0;t<this.heightList.length;t+=1)this.ctx.beginPath(),this.ctx.fillStyle=this.config.colors[t],this.renderRadius(this.config.barWidth*(2*t+1)*this.pixelRatio,0,this.config.barWidth*this.pixelRatio,this.heightList[t]*this.pixelRatio),this.ctx.closePath();this.ctx.restore()}renderWidthFrame(){requestAnimationFrame(()=>{this.reset(),this.ctx.save(),this.axiesChange();for(let t=0;t<this.heightList.length;t+=1)this.ctx.beginPath(),this.ctx.fillStyle=this.config.colors[t],this.renderRadius(this.config.barWidth*(2*t+1)*this.pixelRatio,0,this.config.barWidth*this.pixelRatio,this.renderAttr.frameList[t].shift()*this.pixelRatio),this.ctx.closePath();this.ctx.restore(),this.renderAttr.frameList[0].length&&this.renderWidthFrame()})}renderRadius(t,i,e,n){const s=Math.min(e,n),r=this.config.barRadius>s/2?s/2:this.config.barRadius;this.ctx.moveTo(t,i),this.ctx.lineTo(t,i+n-r),this.ctx.arc(t+r,i+n-r,r,0*Math.PI,.5*Math.PI,!0),this.ctx.lineTo(t+e-r,i+n),this.ctx.arc(t+e-r,i+n-r,r,1.5*Math.PI,2*Math.PI,!0),this.ctx.lineTo(t+e,i),this.ctx.fill()}}},function(t,i,e){"use strict";var n=e(1),s=e(0),r=e(2);i.a=class extends n.a{constructor(t){super(t,{colors:["red","orange","yellow","green","cyan","blue","purple"]}),this.data=[],this.renderData=[],this.renderFrameData=[]}update(t){this.data=t,this.renderData=[],this.renderFrameData=[],this.center={x:this.config.width/2-this.config.padding,y:this.config.height/2-this.config.padding},this.pieWidth=Math.min(this.config.width,this.config.height)/2-this.config.padding,this.data=t;const i=t.reduce((t,i)=>t+i),e=[];if(t.map(t=>{const n=this.renderData.length?this.renderData[this.renderData.length-1]:null,h=n?n.end:0,o=h+t/i*Math.PI*2;if(this.renderData.push({start:h,end:o,x:n?this.center.x+this.pieWidth*Math.cos(n.end):this.center.x+this.pieWidth,y:n?this.center.y+this.pieWidth*Math.sin(n.end):this.center.y}),this.config.renderType===s.a.point){const t=new r.a(h,o,this.config.renderTime,this.config.renderCurve).getList(this.config.framePerSecond);e.push(t)}}),e.length)for(let t=0;t<e[0].length;t+=1){const i=[];for(let n=0;n<e.length;n+=1)i.push(Object.assign({},this.renderData[n],{end:e[n][t]}));this.renderFrameData.push(i)}return this.config.renderType===s.a.total&&new r.a(0,2*Math.PI,this.config.renderTime,this.config.renderCurve).getList(this.config.framePerSecond).map(t=>{const i=[];for(const e of this.renderData){if(!(e.end<=t)){i.push(Object.assign({},e,{end:t}));break}i.push(e)}this.renderFrameData.push(i)}),this}render(){return this.config.renderType===s.a.none?this.renderWithNoFrame():this.config.renderType===s.a.point?this.renderWithFrame():this.config.renderType===s.a.total&&this.renderWithFrame(),this}renderWithNoFrame(t=this.renderData,i){this.reset(),this.ctx.save(),this.axiesChange();for(let i=0;i<t.length;i+=1){this.ctx.beginPath(),this.ctx.moveTo(this.center.x,this.center.y);const e=this.config.colors[i],n=t[i];this.ctx.lineTo(n.x,n.y),this.ctx.fillStyle=e,this.ctx.arc(this.center.x,this.center.y,this.pieWidth,n.start,n.end,!1),this.ctx.fill(),this.ctx.closePath()}i&&i.call(this)}renderWithFrame(){requestAnimationFrame(()=>{this.renderFrameData.length&&this.renderWithNoFrame(this.renderFrameData.shift(),this.renderWithFrame)})}}}])});
//# sourceMappingURL=simply-chart.js.map