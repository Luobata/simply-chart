!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports["simply-chart"]=i():t["simply-chart"]=i()}("undefined"!=typeof self?self:this,function(){return function(t){var i={};function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/",e(e.s=3)}([function(t,i,e){"use strict";var n;e.d(i,"b",function(){return n}),function(t){t.none="none",t.point="point",t.total="total"}(n||(n={}));i.a=class{constructor(t){this.width=200,this.height=100,this.renderType=n.none,this.renderTime=2,this.renderCurve="ease-in-out",this.framePerSecond=60,this.color="blue",this.lineWidth=5,this.barRadius=5,this.colors=["red","orange","yellow","green","cyan","blue","purple"],Object.assign(this,t.base),Object.assign(this,t.attr)}}},function(t,i,e){"use strict";var n=e(0);i.a=class{constructor(t){this.animation=!1,this.margin=2,this.config=new n.a(t),this.canvasInit(),this.animation=this.config.renderType!==n.b.none,this.insert()}insert(){this.dom.appendChild(this.canvas)}reset(){this.canvas.height=this.canvas.height}axiesChange(){this.ctx.scale(1,-1),this.ctx.translate(this.margin,-this.config.height*this.pixelRatio+this.margin)}canvasInit(){"string"==typeof this.config.dom?this.dom=document.querySelector(this.config.dom):this.dom=this.config.dom,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.pixelRatio=window.devicePixelRatio,this.canvas.width=this.config.width*this.pixelRatio,this.canvas.height=this.config.height*this.pixelRatio,this.canvas.style.width=`${this.config.width}px`,this.canvas.style.height=`${this.config.height}px`}}},function(t,i,e){"use strict";var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();var r=e(7),s=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.p0={x:0,y:0},this.p3={x:1,y:1},this.p1=i,this.p2=e,this.bezierStr=i.x+", "+i.y+", "+e.x+", "+e.y,this.easing=r(i.x,i.y,e.x,e.y)}return n(t,[{key:"getPoint",value:function(t){return{x:this.p0.x*Math.pow(1-t,3)+this.p1.x*t*Math.pow(1-t,2)*3+this.p2.x*Math.pow(t,2)*(1-t)*3+this.p3.x*Math.pow(t,3),y:this.p0.y*Math.pow(1-t,3)+this.p1.y*t*Math.pow(1-t,2)*3+this.p2.y*Math.pow(t,2)*(1-t)*3+this.p3.y*Math.pow(t,3)}}},{key:"getYByTime",value:function(t){return this.easing(t)}}]),t}(),h=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();var o=function(){function t(i,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"liner";!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.begin=i,this.end=e,this.time=n,this.animationType=r,this.getBazier()}return h(t,[{key:"getValue",value:function(t){return this.begin+(this.end-this.begin)*this.bezier.getYByTime(t)}},{key:"getList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,i=[],e=0;e<=t*this.time;e+=1)i.push(this.getValue(e/(this.time*t)));return i}},{key:"getBazier",value:function(){var t=void 0,i=void 0;switch(this.animationType){case"liner":t={x:0,y:0},i={x:1,y:1};break;case"ease":t={x:.25,y:.1},i={x:.25,y:1};break;case"ease-in":t={x:.42,y:0},i={x:1,y:1};break;case"ease-out":t={x:0,y:0},i={x:.58,y:1};break;case"ease-in-out":t={x:.42,y:0},i={x:.58,y:1};break;case"in-back-out":t={x:.68,y:-.55},i={x:.27,y:1.55};break;default:var e=this.animationType.split(",");if(!e||4!==e.length)throw new Error("The animation type is not right");t={x:parseFloat(e[0]),y:parseFloat(e[1])},i={x:parseFloat(e[2]),y:parseFloat(e[3])}}this.bezier=new s(t,i)}}]),t}();i.a=o},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e(4),r=e(8);i.default={line:n.a,bar:r.a}},function(t,i,e){"use strict";var n=e(1),r=e(5),s=e(0),h=e(2);i.a=class extends n.a{constructor(t){super(t),this.pointList=[],this.renderAttr={lengthList:[],frameList:[]}}update(t){this.data=t;const i=(this.config.width-2*this.margin)/(this.data.length-1),e=Math.max(...this.data),n=Math.min(...this.data),o=e!==n?(this.config.height-2*this.margin)/(e-n):1,a=[],c=[];let u=[],f=0;for(let t=0;t<this.data.length;t+=1){const e={x:t*i*this.pixelRatio,y:(this.data[t]-n)*o*this.pixelRatio};a.push(e)}if(this.animation){for(let t=1;t<a.length;t+=1)c.push(Object(r.a)(a[t-1],a[t])),this.config.renderType===s.b.point&&(u=u.concat(new h.a(f,c[t-1]+f,this.config.renderTime/a.length,this.config.renderCurve).getList(this.config.framePerSecond)),f+=c[t-1]);this.config.renderType===s.b.total&&(u=new h.a(0,Object(r.b)(c),this.config.renderTime,this.config.renderCurve).getList(this.config.framePerSecond)),this.renderAttr.lengthList=c,this.renderAttr.frameList=u}return this.pointList=a,this}render(){if(this.reset(),this.ctx.save(),this.axiesChange(),this.ctx.lineCap="round",this.ctx.strokeStyle=this.config.color,this.ctx.lineWidth=this.config.lineWidth,this.ctx.beginPath(),this.config.renderType===s.b.none)for(const t of this.pointList)this.ctx.lineTo(t.x,t.y);else this.config.renderType===s.b.point?this.frameRender(this.renderAttr):this.config.renderType===s.b.total&&this.frameRender(this.renderAttr);return this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore(),this}frameRender(t){requestAnimationFrame(()=>{if(!t.frameList.length)return;const i=t.frameList.shift(),e=this.getPointByFrame(i,t.lengthList);this.reset(),this.ctx.lineCap="round",this.ctx.strokeStyle=this.config.color,this.ctx.lineWidth=this.config.lineWidth,this.axiesChange(),this.ctx.beginPath();for(const t of e)this.ctx.lineTo(t.x,t.y);this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore(),t.frameList.length&&this.frameRender(t)})}getPointByFrame(t,i){let e,n=0;for(let r=0;r<i.length;r+=1){if(t<=i[r]+n){e=r;break}n+=i[r]}const r=(t-n)/i[e];return this.pointList.slice(0,e+1).concat({x:this.pointList[e].x+(this.pointList[e+1].x-this.pointList[e].x)*r,y:this.pointList[e].y+(this.pointList[e+1].y-this.pointList[e].y)*r})}}},function(t,i,e){"use strict";i.a=function(t,i){return new n.a({x:i.x-t.x,y:i.y-t.y}).value},i.b=function(t){let i=0;return t.map(t=>i+=t),i};var n=e(6)},function(t,i,e){"use strict";class n{constructor(t){this.vector=t,this.value=this.getValue(this)}add(t){return new n({x:this.vector.x+t.vector.x,y:this.vector.y+t.vector.y})}minus(t){return new n({x:this.vector.x-t.vector.x,y:this.vector.y-t.vector.y})}dot(t){return this.vector.x*t.vector.x+this.vector.y*t.vector.y}cross(t){return this.vector.x*t.vector.y-this.vector.y*t.vector.x}mod(t=!0){return t?Math.sqrt(Math.pow(this.vector.x,2)+Math.pow(this.vector.y,2)):Math.pow(this.vector.x,2)+Math.pow(this.vector.y,2)}vertical(){return new n({x:this.vector.y,y:-this.vector.x}).normaliz()}ankle(t){const i=180*Math.acos(this.dot(t)/(this.mod()*t.mod()))/Math.PI;return i>180?i-180:i}normaliz(){const t=Math.sqrt(1/(Math.pow(this.vector.y,2)/Math.pow(this.vector.x,2)+1));return new n({x:t,y:0===t?1:this.vector.y/this.vector.x*t})}getValue(t){return Math.sqrt(Math.pow(t.vector.x,2)+Math.pow(t.vector.y,2))}}i.a=n},function(t,i){var e=4,n=.001,r=1e-7,s=10,h=11,o=1/(h-1),a="function"==typeof Float32Array;function c(t,i){return 1-3*i+3*t}function u(t,i){return 3*i-6*t}function f(t){return 3*t}function l(t,i,e){return((c(i,e)*t+u(i,e))*t+f(i))*t}function d(t,i,e){return 3*c(i,e)*t*t+2*u(i,e)*t+f(i)}function g(t){return t}t.exports=function(t,i,c,u){if(!(0<=t&&t<=1&&0<=c&&c<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===i&&c===u)return g;for(var f=a?new Float32Array(h):new Array(h),x=0;x<h;++x)f[x]=l(x*o,t,c);function p(i){for(var a=0,u=1,g=h-1;u!==g&&f[u]<=i;++u)a+=o;var x=a+(i-f[--u])/(f[u+1]-f[u])*o,p=d(x,t,c);return p>=n?function(t,i,n,r){for(var s=0;s<e;++s){var h=d(i,n,r);if(0===h)return i;i-=(l(i,n,r)-t)/h}return i}(i,x,t,c):0===p?x:function(t,i,e,n,h){var o,a,c=0;do{(o=l(a=i+(e-i)/2,n,h)-t)>0?e=a:i=a}while(Math.abs(o)>r&&++c<s);return a}(i,a,a+o,t,c)}return function(t){return 0===t?0:1===t?1:l(p(t),i,u)}}},function(t,i,e){"use strict";var n=e(1),r=e(0),s=e(2);i.a=class extends n.a{constructor(t){super(t),this.data=[],this.heightList=[],this.renderAttr={frameList:[]}}update(t){this.data=t;const i=(this.config.width-t.length-1)/t.length,e=this.config.width/(2*t.length+1);this.config.barWidth?this.config.barWidth>i&&(this.config.barWidth=i):this.config.barWidth=e;const n=Math.max(...this.data),h=0!==n?(this.config.height-2*this.margin)/(n-0):1;for(let t=0;t<this.data.length;t+=1)1===h&&0===n?this.heightList.push(1):this.heightList.push((this.data[t]-0)*h),this.config.renderType===r.b.total&&this.renderAttr.frameList.push(new s.a(0,this.heightList[t],this.config.renderTime,this.config.renderCurve).getList(this.config.framePerSecond));return this}render(){return this.config.renderType===r.b.none?this.renderWidthNoFrame():this.config.renderType===r.b.total&&this.renderWidthFrame(),this}renderWidthNoFrame(){this.reset(),this.ctx.save(),this.axiesChange();for(let t=0;t<this.heightList.length;t+=1)this.ctx.beginPath(),this.ctx.fillStyle=this.config.colors[t],this.renderRadius(this.config.barWidth*(2*t+1)*this.pixelRatio,0,this.config.barWidth*this.pixelRatio,this.heightList[t]*this.pixelRatio),this.ctx.closePath();this.ctx.restore()}renderWidthFrame(){requestAnimationFrame(()=>{this.reset(),this.ctx.save(),this.axiesChange();for(let t=0;t<this.heightList.length;t+=1)this.ctx.beginPath(),this.ctx.fillStyle=this.config.colors[t],this.renderRadius(this.config.barWidth*(2*t+1)*this.pixelRatio,0,this.config.barWidth*this.pixelRatio,this.renderAttr.frameList[t].shift()*this.pixelRatio),this.ctx.closePath();this.ctx.restore(),this.renderAttr.frameList[0].length&&this.renderWidthFrame()})}renderRadius(t,i,e,n){const r=Math.min(e,n),s=this.config.barRadius>r/2?r:this.config.barRadius;this.ctx.moveTo(t,i),this.ctx.lineTo(t,i+n-s),this.ctx.arc(t+s,i+n-s,s,0*Math.PI,.5*Math.PI,!0),this.ctx.lineTo(t+e-s,i+n),this.ctx.arc(t+e-s,i+n-s,s,1.5*Math.PI,2*Math.PI,!0),this.ctx.lineTo(t+e,i),this.ctx.fill()}}}])});
//# sourceMappingURL=simply-chart.js.map