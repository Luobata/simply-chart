!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports["simply-chart"]=i():t["simply-chart"]=i()}("undefined"!=typeof self?self:this,function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/",e(e.s=4)}([function(t,i,e){"use strict";var s;e.d(i,"a",function(){return s}),function(t){t.none="none",t.point="point",t.total="total"}(s||(s={}))},function(t,i,e){"use strict";var s=e(0),n=e(6);const h={width:200,height:100,padding:10,renderType:s.a.none,renderTime:2,renderCurve:"ease-in-out",framePerSecond:60};let r=0;i.a=class{constructor(t,i){this.animation=!1,this.config=Object.assign({},h,i,t.base,t.attr),this.config.innerWidth=this.config.width-2*this.config.padding,this.config.innerHeight=this.config.height-2*this.config.padding,this.canvasInit(),this.animation=this.config.renderType!==s.a.none,this.insert(),this.getName(),Object(n.b)(),Object(n.a)(this)}insert(){this.dom.appendChild(this.canvas)}reset(){this.canvas.height=this.canvas.height}axiesChange(){this.ctx.scale(1,-1),this.ctx.translate(this.config.padding*this.pixelRatio,(-this.config.height+this.config.padding)*this.pixelRatio)}canvasInit(){void 0===this.config.dom?(this.dom=document.createElement("div"),document.body.appendChild(this.dom)):"string"==typeof this.config.dom?this.dom=document.querySelector(this.config.dom):this.dom=this.config.dom,this.canvas=this.config.canvas||document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.pixelRatio=window.devicePixelRatio,this.canvas.width=this.config.width*this.pixelRatio,this.canvas.height=this.config.height*this.pixelRatio,this.canvas.style.width=`${this.config.width}px`,this.canvas.style.height=`${this.config.height}px`}getName(){this.id=r,r+=1,this.name=`${this.constructor.name}_${this.id}`}}},function(t,i,e){"use strict";var s=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}();var n=e(8),h=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.p0={x:0,y:0},this.p3={x:1,y:1},this.p1=i,this.p2=e,this.bezierStr=i.x+", "+i.y+", "+e.x+", "+e.y,this.easing=n(i.x,i.y,e.x,e.y)}return s(t,[{key:"getPoint",value:function(t){return{x:this.p0.x*Math.pow(1-t,3)+this.p1.x*t*Math.pow(1-t,2)*3+this.p2.x*Math.pow(t,2)*(1-t)*3+this.p3.x*Math.pow(t,3),y:this.p0.y*Math.pow(1-t,3)+this.p1.y*t*Math.pow(1-t,2)*3+this.p2.y*Math.pow(t,2)*(1-t)*3+this.p3.y*Math.pow(t,3)}}},{key:"getYByTime",value:function(t){return this.easing(t)}}]),t}(),r=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}();var o=function(){function t(i,e,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"liner";!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.begin=i,this.end=e,this.time=s,this.animationType=n,this.getBazier()}return r(t,[{key:"getValue",value:function(t){return this.begin+(this.end-this.begin)*this.bezier.getYByTime(t)}},{key:"getList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,i=[],e=0;e<=t*this.time;e+=1)i.push(this.getValue(e/(this.time*t)));return i}},{key:"getBazier",value:function(){var t=void 0,i=void 0;switch(this.animationType){case"liner":t={x:0,y:0},i={x:1,y:1};break;case"ease":t={x:.25,y:.1},i={x:.25,y:1};break;case"ease-in":t={x:.42,y:0},i={x:1,y:1};break;case"ease-out":t={x:0,y:0},i={x:.58,y:1};break;case"ease-in-out":t={x:.42,y:0},i={x:.58,y:1};break;case"in-back-out":t={x:.68,y:-.55},i={x:.27,y:1.55};break;default:var e=this.animationType.split(",");if(!e||4!==e.length)throw new Error("The animation type is not right");t={x:parseFloat(e[0]),y:parseFloat(e[1])},i={x:parseFloat(e[2]),y:parseFloat(e[3])}}this.bezier=new h(t,i)}}]),t}();i.a=o},function(t,i,e){"use strict";class s{constructor(t){this.vector=t,this.value=this.getValue(this)}add(t){return new s({x:this.vector.x+t.vector.x,y:this.vector.y+t.vector.y})}minus(t){return new s({x:this.vector.x-t.vector.x,y:this.vector.y-t.vector.y})}dot(t){return this.vector.x*t.vector.x+this.vector.y*t.vector.y}cross(t){return this.vector.x*t.vector.y-this.vector.y*t.vector.x}mod(t=!0){return t?Math.sqrt(Math.pow(this.vector.x,2)+Math.pow(this.vector.y,2)):Math.pow(this.vector.x,2)+Math.pow(this.vector.y,2)}vertical(){return new s({x:this.vector.y,y:-this.vector.x}).normaliz()}ankle(t){const i=180*Math.acos(this.dot(t)/(this.mod()*t.mod()))/Math.PI;return i>180?i-180:i}normaliz(){const t=Math.sqrt(1/(Math.pow(this.vector.y,2)/Math.pow(this.vector.x,2)+1));return new s({x:t,y:0===t?1:this.vector.y/this.vector.x*t})}getValue(t){return Math.sqrt(Math.pow(t.vector.x,2)+Math.pow(t.vector.y,2))}}i.a=s},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e(5),n=e(11),h=e(12),r=e(13);i.default={line:s.a,bar:n.a,pie:h.a,radius:r.a,Line:s.a,Bar:n.a,Pie:h.a,Radius:r.a}},function(t,i,e){"use strict";var s,n=e(1),h=e(7),r=e(0),o=e(2),a=e(9),c=e(10);!function(t){t.catumulRom="catumulRom",t.bezierSmooth="bezierSmooth"}(s||(s={}));i.a=class extends n.a{constructor(t){super(t,{color:"blue",lineWidth:5,point:!1,pointRadius:3,pointFill:!1,smooth:!1,shadowColor:""}),this.pointList=[],this.renderAttr={lengthList:[],frameList:[]},this.smoothType=s.catumulRom}point(){return this.config.point=!0,this}fill(){return this.config.pointFill=!0,this}update(t){this.data=t,1===this.data.length&&(this.point(),this.fill());const i=1!==this.data.length?this.config.innerWidth/(this.data.length-1):this.config.innerWidth/2,e=Math.max(...this.data),s=Math.min(...this.data),n=e!==s?this.config.innerHeight/(e-s):1,a=[],c=[];let l=[],d=0;for(let t=0;t<this.data.length;t+=1){const e={x:t*i*this.pixelRatio,y:(this.data[t]-s)*n*this.pixelRatio};a.push(e)}if(this.animation){for(let t=1;t<a.length;t+=1)c.push(Object(h.a)(a[t-1],a[t])),this.config.renderType===r.a.point&&(l=l.concat(new o.a(d,c[t-1]+d,this.config.renderTime/a.length,this.config.renderCurve).getList(this.config.framePerSecond)),d+=c[t-1]);this.config.renderType===r.a.total&&(l=new o.a(0,Object(h.b)(c),this.config.renderTime,this.config.renderCurve).getList(this.config.framePerSecond)),this.renderAttr.lengthList=c,this.renderAttr.frameList=l}return this.pointList=a,this}render(){return this.config.renderType===r.a.none?this.renderNoAnimation():this.config.renderType===r.a.point?this.frameRender(this.renderAttr):this.config.renderType===r.a.total&&this.frameRender(this.renderAttr),this}renderStrike(t){if(this.ctx.lineCap="round",this.ctx.lineWidth=this.config.lineWidth,this.config.shadowColor){const i=1-this.config.lineWidth;this.ctx.beginPath(),this.ctx.strokeStyle=this.config.shadowColor,this.ctx.moveTo(t[0].x,t[0].y),this.ctx.lineTo(0,i),this.ctx.lineTo(t[t.length-1].x,i),this.ctx.lineTo(t[t.length-1].x,t[t.length-1].y),this.ctx.stroke(),this.ctx.closePath()}this.ctx.beginPath(),this.ctx.strokeStyle=this.config.color,this.ctx.moveTo(t[0].x,t[0].y);for(let i=1;i<t.length;i+=1){const e=t[i];this.ctx.lineTo(e.x,e.y)}this.ctx.stroke(),this.ctx.closePath()}renderFill(t){if(this.config.shadowColor){this.ctx.beginPath(),this.ctx.fillStyle=this.config.shadowColor,this.ctx.moveTo(0,0);for(const i of t)this.ctx.lineTo(i.x,i.y);this.ctx.lineTo(t[t.length-1].x,0),this.ctx.fill(),this.ctx.closePath()}}renderNoAnimation(){let t;this.reset(),this.axiesChange(),this.ctx.save(),this.ctx.beginPath(),t=this.config.smooth?Object(c.a)(this.pointList,100):this.pointList,this.renderFill(t),this.renderStrike(t),this.ctx.closePath(),this.ctx.restore();for(const t of this.pointList)this.renderPoint(t)}frameRender(t){requestAnimationFrame(()=>{if(!t.frameList.length)return;const i=t.frameList.shift(),e=this.getPointByFrame(i,t.lengthList);let n;if(this.reset(),this.axiesChange(),this.ctx.save(),this.ctx.beginPath(),this.config.smooth){if(this.smoothType===s.catumulRom)n=Object(c.a)(e,100);else if(this.smoothType===s.bezierSmooth){const t=Object(a.a)(e);this.ctx.moveTo(e[0].x,e[0].y);for(const i of t)this.ctx.bezierCurveTo(i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y)}}else n=e;this.renderFill(n),this.renderStrike(n),this.ctx.closePath(),this.ctx.restore();for(const t of e)this.renderPoint(t);t.frameList.length&&this.frameRender(t)})}renderPoint(t){if(!this.config.point)return;const i=this.config.pointRadius*this.pixelRatio;this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.x,t.y,i,0,2*Math.PI),this.config.pointFill?(this.ctx.fillStyle=this.config.color,this.ctx.fill()):(this.ctx.lineWidth=this.config.lineWidth,this.ctx.strokeStyle=this.config.color,this.ctx.stroke(),this.ctx.fillStyle="#fff",this.ctx.fill()),this.ctx.closePath(),this.ctx.restore()}getPointByFrame(t,i){let e,s=0;for(let n=0;n<i.length;n+=1){if(t<=i[n]+s){e=n;break}s+=i[n]}const n=(t-s)/i[e];return this.pointList.slice(0,e+1).concat({x:this.pointList[e].x+(this.pointList[e+1].x-this.pointList[e].x)*n,y:this.pointList[e].y+(this.pointList[e+1].y-this.pointList[e].y)*n})}}},function(t,i,e){"use strict";const s=window?window.__DATA_DEBUGGER_DEVTOOLS_GLOBAL_HOOK__:"";let n=!1,h=!0;const r=[];i.b=(()=>{s&&!n&&(s.emit("install"),n=!0)});const o=()=>{h&&s&&((()=>{if(h||!window){if(window.__Canvas_Screen_Data)return;window.__Canvas_Screen_Data=r}})(),s.emit("refresh"))};i.a=(t=>{const i=t;let e=r.find(t=>t.id===i.id);e?e=t:r.push(i),o()})},function(t,i,e){"use strict";i.a=function(t,i){return new s.a({x:i.x-t.x,y:i.y-t.y}).value},i.b=function(t){let i=0;return t.map(t=>i+=t),i};var s=e(3)},function(t,i){var e=4,s=.001,n=1e-7,h=10,r=11,o=1/(r-1),a="function"==typeof Float32Array;function c(t,i){return 1-3*i+3*t}function l(t,i){return 3*i-6*t}function d(t){return 3*t}function f(t,i,e){return((c(i,e)*t+l(i,e))*t+d(i))*t}function u(t,i,e){return 3*c(i,e)*t*t+2*l(i,e)*t+d(i)}function x(t){return t}t.exports=function(t,i,c,l){if(!(0<=t&&t<=1&&0<=c&&c<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===i&&c===l)return x;for(var d=a?new Float32Array(r):new Array(r),g=0;g<r;++g)d[g]=f(g*o,t,c);function p(i){for(var a=0,l=1,x=r-1;l!==x&&d[l]<=i;++l)a+=o;var g=a+(i-d[--l])/(d[l+1]-d[l])*o,p=u(g,t,c);return p>=s?function(t,i,s,n){for(var h=0;h<e;++h){var r=u(i,s,n);if(0===r)return i;i-=(f(i,s,n)-t)/r}return i}(i,g,t,c):0===p?g:function(t,i,e,s,r){var o,a,c=0;do{(o=f(a=i+(e-i)/2,s,r)-t)>0?e=a:i=a}while(Math.abs(o)>n&&++c<h);return a}(i,a,a+o,t,c)}return function(t){return 0===t?0:1===t?1:f(p(t),i,l)}}},function(t,i,e){"use strict";function s(t,i,e,s){return[i,{x:i.x+.25*(e.x-t.x),y:i.y+.25*(e.y-t.y)},{x:e.x-.25*(s.x-i.x),y:e.y-.25*(s.y-i.y)},e]}i.a=(t=>(function(t){const i=t.length,e=[];for(let n=0;n<i-1;n+=1){const h=s(t[Math.max(0,n-1)],t[n],t[Math.min(n+1,i-1)],t[Math.min(n+2,i-1)]);e.push(h)}return e})(t))},function(t,i,e){"use strict";var s=e(3);function n(t,i,e,n,h){const r=h*h*h,o=h*h,a=-.5*r+o-.5*h,c=1.5*r-2.5*o+1,l=-1.5*r+2*o+.5*h,d=.5*r-.5*o,f=t.x*a+i.x*c+e.x*l+n.x*d,u=t.y*a+i.y*c+e.y*l+n.y*d;return new s.a({x:f,y:u})}i.a=((t,i)=>(function(t,i){if(!t)return;const e=t.length,s=[];for(let r=0;r<e-1;r+=1)for(let o=0;o<1;o+=1/i){const i=n(t[Math.max(0,r-1)],t[r],t[Math.min(r+1,e-1)],t[Math.min(r+2,e-1)],o);s.push(i),h+=1}return s})(t,i).map(t=>t.vector));let h=0},function(t,i,e){"use strict";var s=e(1),n=e(0),h=e(2);i.a=class extends s.a{constructor(t){super(t,{barRadius:5,colors:["red","orange","yellow","green","cyan","blue","purple"]}),this.data=[],this.heightList=[],this.renderAttr={frameList:[]}}update(t){this.data=t;const i=(this.config.innerWidth-t.length-1)/t.length,e=this.config.innerWidth/(2*t.length+1);this.config.barWidth?this.config.barWidth>i&&(this.config.barWidth=i):this.config.barWidth=e;const s=Math.max(...this.data),r=0!==s?this.config.innerHeight/(s-0):1;for(let t=0;t<this.data.length;t+=1)1===r&&0===s?this.heightList.push(1):this.heightList.push((this.data[t]-0)*r),this.config.renderType===n.a.total&&this.renderAttr.frameList.push(new h.a(0,this.heightList[t],this.config.renderTime,this.config.renderCurve).getList(this.config.framePerSecond));return this}render(){return this.config.renderType===n.a.none?this.renderWidthNoFrame():this.config.renderType===n.a.total&&this.renderWidthFrame(),this}renderWidthNoFrame(){this.reset(),this.ctx.save(),this.axiesChange();for(let t=0;t<this.heightList.length;t+=1)this.ctx.beginPath(),this.ctx.fillStyle=this.config.colors[t],this.renderRadius(this.config.barWidth*(2*t+1)*this.pixelRatio,0,this.config.barWidth*this.pixelRatio,this.heightList[t]*this.pixelRatio),this.ctx.closePath();this.ctx.restore()}renderWidthFrame(){requestAnimationFrame(()=>{this.reset(),this.ctx.save(),this.axiesChange();for(let t=0;t<this.heightList.length;t+=1)this.ctx.beginPath(),this.ctx.fillStyle=this.config.colors[t],this.renderRadius(this.config.barWidth*(2*t+1)*this.pixelRatio,0,this.config.barWidth*this.pixelRatio,this.renderAttr.frameList[t].shift()*this.pixelRatio),this.ctx.closePath();this.ctx.restore(),this.renderAttr.frameList[0].length&&this.renderWidthFrame()})}renderRadius(t,i,e,s){const n=Math.min(e,s),h=this.config.barRadius>n/2?n/2:this.config.barRadius;this.ctx.moveTo(t,i),this.ctx.lineTo(t,i+s-h),this.ctx.arc(t+h,i+s-h,h,0*Math.PI,.5*Math.PI,!0),this.ctx.lineTo(t+e-h,i+s),this.ctx.arc(t+e-h,i+s-h,h,1.5*Math.PI,2*Math.PI,!0),this.ctx.lineTo(t+e,i),this.ctx.fill()}}},function(t,i,e){"use strict";var s=e(1),n=e(0),h=e(2);i.a=class extends s.a{constructor(t){super(t,{colors:["red","orange","yellow","green","cyan","blue","purple"],fill:!1}),this.data=[],this.renderData=[],this.renderFrameData=[],this.pieCircularWidth=10}update(t){this.data=t,this.renderData=[],this.renderFrameData=[],this.center={x:(this.config.width/2-this.config.padding)*this.pixelRatio,y:(this.config.height/2-this.config.padding)*this.pixelRatio},this.pieWidth=(Math.min(this.config.width,this.config.height)/2-this.config.padding)*this.pixelRatio,this.pieCircularWidth=(this.pieWidth<this.pieCircularWidth?this.pieWidth/2:this.pieCircularWidth)*this.pixelRatio;const i=t.reduce((t,i)=>t+i),e=[];if(t.map(t=>{const s=this.renderData.length?this.renderData[this.renderData.length-1]:null,r=s?s.end:0,o=r+t/i*Math.PI*2;if(this.renderData.push({start:r,end:o,x:s?this.center.x+this.pieWidth*Math.cos(s.end):this.center.x+this.pieWidth,y:s?this.center.y+this.pieWidth*Math.sin(s.end):this.center.y}),this.config.renderType===n.a.point){const t=new h.a(r,o,this.config.renderTime,this.config.renderCurve).getList(this.config.framePerSecond);e.push(t)}}),e.length)for(let t=0;t<e[0].length;t+=1){const i=[];for(let s=0;s<e.length;s+=1)i.push(Object.assign({},this.renderData[s],{end:e[s][t]}));this.renderFrameData.push(i)}return this.config.renderType===n.a.total&&new h.a(0,2*Math.PI,this.config.renderTime,this.config.renderCurve).getList(this.config.framePerSecond).map(t=>{const i=[];for(const e of this.renderData){if(!(e.end<=t)){i.push(Object.assign({},e,{end:t}));break}i.push(e)}this.renderFrameData.push(i)}),this}render(){return this.config.renderType===n.a.none?this.renderWithNoFrame():this.config.renderType===n.a.point?this.renderWithFrame():this.config.renderType===n.a.total&&this.renderWithFrame(),this}renderWithNoFrame(t=this.renderData,i){this.reset(),this.ctx.save(),this.axiesChange();for(let i=0;i<t.length;i+=1){this.ctx.beginPath(),this.ctx.moveTo(this.center.x,this.center.y);const e=this.config.colors[i],s=t[i];this.ctx.lineTo(s.x,s.y),this.ctx.fillStyle=e,this.ctx.arc(this.center.x,this.center.y,this.pieWidth,s.start,s.end,!1),this.ctx.fill(),this.ctx.closePath()}this.renderFill(),this.ctx.restore(),i&&i.call(this)}renderWithFrame(){requestAnimationFrame(()=>{this.renderFrameData.length&&this.renderWithNoFrame(this.renderFrameData.shift(),this.renderWithFrame)})}renderFill(){this.config.fill&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle="white",this.ctx.arc(this.center.x,this.center.y,this.pieWidth-this.pieCircularWidth,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore())}}},function(t,i,e){"use strict";var s=e(1),n=e(0);i.a=class extends s.a{constructor(t){super(Object.assign({},t),{color:"red",pieColor:"#ccc"}),this.ankle=0,this.pieCircularWidth=10}update(t){return this.data=t,this.ankle=t/100*Math.PI*2,this.center={x:(this.config.width/2-this.config.padding)*this.pixelRatio,y:(this.config.height/2-this.config.padding)*this.pixelRatio},this.pieWidth=(Math.min(this.config.width,this.config.height)/2-this.config.padding)*this.pixelRatio,this}render(){return this.config.renderType===n.a.none&&this.renderWithNoFrame(),this}renderWithNoFrame(){this.reset(),this.ctx.save(),this.axiesChange(),this.ctx.beginPath(),this.ctx.moveTo(this.center.x,this.center.y),this.ctx.fillStyle=this.config.pieColor,this.ctx.arc(this.center.x,this.center.y,this.pieWidth,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath(),this.renderColor(),this.renderFill(),this.ctx.restore()}renderColor(){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.center.x,this.center.y),this.ctx.fillStyle=this.config.color,this.ctx.arc(this.center.x,this.center.y,this.pieWidth,0,this.ankle,!1),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()}renderFill(){this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle="white",this.ctx.arc(this.center.x,this.center.y,this.pieWidth-this.pieCircularWidth,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()}}}])});
//# sourceMappingURL=simply-chart.js.map