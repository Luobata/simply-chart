{"version":3,"file":"simply-chart.esm.js","sources":["../src/core/index.ts"],"sourcesContent":["/**\n * @description entry core\n */\n\nimport { IConfig } from 'Lib/interface';\n\nexport default class Chart {\n    private dom: HTMLElement;\n    private config: IConfig;\n    private canvas: HTMLCanvasElement;\n    private ctx: CanvasRenderingContext2D;\n    private pixelRatio: number;\n    private data: number[];\n\n    constructor(config: IConfig) {\n        this.config = config;\n        this.defaultValue();\n\n        this.canvasInit();\n\n        this.dom.appendChild(this.canvas);\n    }\n\n    public update(data: number[]): Chart {\n        this.data = data;\n\n        return this;\n    }\n\n    public reset(): void {\n        this.canvas.height = this.canvas.height;\n    }\n\n    public render(): Chart {\n        const marginX: number = this.config.width / (this.data.length - 1);\n        const maxY: number = Math.max(...this.data);\n        const minY: number = Math.min(...this.data);\n        const rateY: number = this.config.height / (maxY - minY);\n        this.reset();\n        this.ctx.save();\n        this.axiesChange();\n        this.ctx.strokeStyle = this.config.color;\n        this.ctx.lineWidth = this.config.lineWidth;\n        this.ctx.beginPath();\n        // this.ctx.moveTo(0, 0);\n\n        for (let i: number = 0; i < this.data.length; i = i + 1) {\n            this.ctx.lineTo(\n                i * marginX * this.pixelRatio,\n                (this.data[i] - minY) * rateY * this.pixelRatio,\n            );\n        }\n\n        this.ctx.stroke();\n        this.ctx.closePath();\n        this.ctx.restore();\n\n        return this;\n    }\n\n    // 参数默认值\n    private defaultValue(): void {\n        this.config.color = this.config.color || 'blue';\n        this.config.lineWidth = this.config.lineWidth || 5;\n    }\n\n    private canvasInit(): void {\n        if (typeof this.config.dom === 'string') {\n            this.dom = document.querySelector(this.config.dom);\n        } else {\n            this.dom = this.config.dom;\n        }\n        this.canvas = document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d');\n        this.pixelRatio = window.devicePixelRatio;\n\n        this.canvas.width = this.config.width * this.pixelRatio;\n        this.canvas.height = this.config.height * this.pixelRatio;\n\n        this.canvas.style.width = `${this.config.width}px`;\n        this.canvas.style.height = `${this.config.height}px`;\n    }\n\n    private axiesChange(): void {\n        this.ctx.scale(1, -1);\n        this.ctx.translate(0, -this.config.height * this.pixelRatio);\n    }\n}\n"],"names":["config","defaultValue","canvasInit","dom","appendChild","canvas","data","height","marginX","width","length","maxY","Math","max","minY","min","rateY","reset","ctx","save","axiesChange","strokeStyle","color","lineWidth","beginPath","i","lineTo","pixelRatio","stroke","closePath","restore","document","querySelector","createElement","getContext","window","devicePixelRatio","style","scale","translate"],"mappings":";;;;;;;;;;mBAcgBA,MAAZ;;;aACSA,MAAL,GAAcA,MAAd;aACKC,YAAL;aAEKC,UAAL;aAEKC,GAAL,CAASC,WAAT,CAAqB,KAAKC,MAA1B;;;;;+BAGUC;iBACLA,IAAL,GAAYA,IAAZ;mBAEO,IAAP;;;;;iBAIKD,MAAL,CAAYE,MAAZ,GAAqB,KAAKF,MAAL,CAAYE,MAAjC;;;;;gBAIMC,UAAkB,KAAKR,MAAL,CAAYS,KAAZ,IAAqB,KAAKH,IAAL,CAAUI,MAAV,GAAmB,CAAxC,CAAxB;gBACMC,OAAeC,KAAKC,GAAL,gCAAY,KAAKP,IAAjB,EAArB;gBACMQ,OAAeF,KAAKG,GAAL,gCAAY,KAAKT,IAAjB,EAArB;gBACMU,QAAgB,KAAKhB,MAAL,CAAYO,MAAZ,IAAsBI,OAAOG,IAA7B,CAAtB;iBACKG,KAAL;iBACKC,GAAL,CAASC,IAAT;iBACKC,WAAL;iBACKF,GAAL,CAASG,WAAT,GAAuB,KAAKrB,MAAL,CAAYsB,KAAnC;iBACKJ,GAAL,CAASK,SAAT,GAAqB,KAAKvB,MAAL,CAAYuB,SAAjC;iBACKL,GAAL,CAASM,SAAT;;iBAGK,IAAIC,IAAY,CAArB,EAAwBA,IAAI,KAAKnB,IAAL,CAAUI,MAAtC,EAA8Ce,IAAIA,IAAI,CAAtD,EAAyD;qBAChDP,GAAL,CAASQ,MAAT,CACID,IAAIjB,OAAJ,GAAc,KAAKmB,UADvB,EAEI,CAAC,KAAKrB,IAAL,CAAUmB,CAAV,IAAeX,IAAhB,IAAwBE,KAAxB,GAAgC,KAAKW,UAFzC;;iBAMCT,GAAL,CAASU,MAAT;iBACKV,GAAL,CAASW,SAAT;iBACKX,GAAL,CAASY,OAAT;mBAEO,IAAP;;;;;;;iBAKK9B,MAAL,CAAYsB,KAAZ,GAAoB,KAAKtB,MAAL,CAAYsB,KAAZ,IAAqB,MAAzC;iBACKtB,MAAL,CAAYuB,SAAZ,GAAwB,KAAKvB,MAAL,CAAYuB,SAAZ,IAAyB,CAAjD;;;;;gBAII,OAAO,KAAKvB,MAAL,CAAYG,GAAnB,KAA2B,QAA/B,EAAyC;qBAChCA,GAAL,GAAW4B,SAASC,aAAT,CAAuB,KAAKhC,MAAL,CAAYG,GAAnC,CAAX;aADJ,MAEO;qBACEA,GAAL,GAAW,KAAKH,MAAL,CAAYG,GAAvB;;iBAECE,MAAL,GAAc0B,SAASE,aAAT,CAAuB,QAAvB,CAAd;iBACKf,GAAL,GAAW,KAAKb,MAAL,CAAY6B,UAAZ,CAAuB,IAAvB,CAAX;iBACKP,UAAL,GAAkBQ,OAAOC,gBAAzB;iBAEK/B,MAAL,CAAYI,KAAZ,GAAoB,KAAKT,MAAL,CAAYS,KAAZ,GAAoB,KAAKkB,UAA7C;iBACKtB,MAAL,CAAYE,MAAZ,GAAqB,KAAKP,MAAL,CAAYO,MAAZ,GAAqB,KAAKoB,UAA/C;iBAEKtB,MAAL,CAAYgC,KAAZ,CAAkB5B,KAAlB,GAA6B,KAAKT,MAAL,CAAYS,KAAzC;iBACKJ,MAAL,CAAYgC,KAAZ,CAAkB9B,MAAlB,GAA8B,KAAKP,MAAL,CAAYO,MAA1C;;;;;iBAIKW,GAAL,CAASoB,KAAT,CAAe,CAAf,EAAkB,CAAC,CAAnB;iBACKpB,GAAL,CAASqB,SAAT,CAAmB,CAAnB,EAAsB,CAAC,KAAKvC,MAAL,CAAYO,MAAb,GAAsB,KAAKoB,UAAjD;;;;;;;;;"}